# QMIX Configuration for Unity Warehouse (Improved - Based on Successful Config)
# Balanced for performance without OOM errors

name: "qmix"

# Action selection - Extended exploration for multi-agent coordination
action_selector: "epsilon_greedy"
epsilon_start: 1.0
epsilon_finish: 0.1            # Keep some exploration (0.1 vs 0.05)
epsilon_anneal_time: 200000    # PEER OPTIMIZED: 200k steps (faster exploration→exploitation)
evaluation_epsilon: 0.0

# Runner
runner: "episode"              # Use "parallel" if you want to run multiple Unity instances

# Buffer - Reduced buffer size for memory safety
buffer_size: 5000              # PEER OPTIMIZED: 5k episodes (halves RAM usage)

# Target network update
target_update_interval_or_tau: 200

# Observations
obs_agent_id: True
obs_last_action: False
obs_individual_obs: False

# Learning
standardise_returns: False
standardise_rewards: False    # DISABLED: Kills sparse reward signal!
agent_output_type: "q"
learner: "q_learner"
double_q: True

# Agent network
agent: "rnn"                   # Keep RNN for partial observability
use_rnn: True
rnn_hidden_dim: 64

# Mixer network
mixer: "qmix"
mixing_embed_dim: 32
hypernet_layers: 2
hypernet_embed: 64

# Training - Optimized for speed and memory
batch_size: 16                 # Conservative size for system with limited RAM
batch_size_run: 1              # Must be 1 for episode_runner (can't parallelize single Unity instance)
lr: 0.001                      # PEER OPTIMIZED: 2× faster learning (was 0.0005)
optim_alpha: 0.99
optim_eps: 0.00001
grad_norm_clip: 10
gamma: 0.99

# Evaluation - More frequent saves and tests
test_nepisode: 10
test_interval: 20000           # Test every 20k steps
log_interval: 10000            # Log every 10k steps
runner_log_interval: 10000
learner_log_interval: 10000

# Checkpointing - CRITICAL: Save more frequently
save_model: True
save_model_interval: 100000    # Save every 100k steps (not 50k)
checkpoint_path: ""

# Other
use_cuda: True                 # Will use CPU if not available
